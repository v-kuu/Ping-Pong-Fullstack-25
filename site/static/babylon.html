<!doctype html>
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Pong</title>

        <style>
            html,
            body {
                overflow: hidden;
                width: 100%;
                height: 100%;
                margin: 0;
                padding: 0;
            }
            #renderCanvas {
                width: 100%;
                height: 100%;
                touch-action: none;
            }
        </style>

        <script src="https://cdn.babylonjs.com/babylon.js"></script>
        <script type="module" src="/src/pong.ts"></script>
    </head>

    <body>
        <canvas id="renderCanvas"></canvas>
        <!--
	<script>
        const canvas = document.getElementById("renderCanvas"); // Get the canvas element
        const engine = new BABYLON.Engine(canvas, true); // Generate the BABYLON 3D engine
        const createScene = function ()
		{
			var scene = new BABYLON.Scene(engine);

			//camera setup
			var camera = new BABYLON.ArcRotateCamera("camera", -Math.PI / 2, Math.PI / 6, 20, new BABYLON.Vector3(0, 0, 0), scene);
			camera.attachControl(canvas, true);
			camera.lowerBetaLimit = camera.upperBetaLimit = camera.beta;
			camera.lowerAlphaLimit = camera.upperAlphaLimit = camera.alpha;
			camera.panningAxis = new BABYLON.Vector3(1, 1, 0);
			camera.panningSensibility = 1e3;

			//light setup
			const light = new BABYLON.DirectionalLight("light", new BABYLON.Vector3(-0.7, -1, -0.5), scene);
			light.autoCalcShadowZBounds = true;
			light.intensity = 0.7;

			//entity setup
			var sphere = BABYLON.MeshBuilder.CreateSphere("sphere", { diameter: 0.5, segments: 32 }, scene);
			sphere.position.y = 0.25;
			var ground = BABYLON.MeshBuilder.CreateGround("ground", { width: 12, height: 6 }, scene);
			ground.receiveShadows = true;
			var box1 = BABYLON.MeshBuilder.CreateBox("player1", { width: 0.5, height: 0.3, depth: 3 }, scene);
			box1.position.x = -6;
			box1.position.y = 0.2;
			var box2 = BABYLON.MeshBuilder.CreateBox("player2", { width: 0.5, height: 0.3, depth: 3 }, scene);
			box2.position.x = 6;
			box2.position.y = 0.2;

			//shadow setup
			const csm = new BABYLON.CascadedShadowGenerator(4096, light);csm.autoCalcDepthBounds = true;
			csm.addShadowCaster(sphere);
			csm.addShadowCaster(box1);
			csm.addShadowCaster(box2);

			//input setup
			const keys = {};
			window.addEventListener("keydown", (e) => keys[e.key] = true);
			window.addEventListener("keyup", (e) => keys[e.key] = false);
			const moveSpeed = 6;
			scene.onBeforeRenderObservable.add(() => {
				const delta = scene.getEngine().getDeltaTime() / 1e3;
				const distance = moveSpeed * delta;
				if (keys["w"]) {
					box1.position.z += distance;
				}
				if (keys["s"]) {
					box1.position.z -= distance;
				}
				if (keys["i"]) {
					box2.position.z += distance;
				}
				if (keys["k"]) {
					box2.position.z -= distance;
				}
			});
			return scene;
        };
        const scene = createScene(); //Call the createScene function
        // Register a render loop to repeatedly render the scene
        engine.runRenderLoop(function () {
                scene.render();
        });
        // Watch for browser/canvas resize events
        window.addEventListener("resize", function () {
                engine.resize();
        });
	</script>
	-->
    </body>
</html>
